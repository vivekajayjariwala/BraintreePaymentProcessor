{"ast":null,"code":"\"use strict\";\n\nconst {\n  Readable\n} = require(\"stream\");\nclass SearchResponseStream extends Readable {\n  constructor(searchResponse) {\n    super({\n      objectMode: true\n    });\n    this.searchResponse = searchResponse;\n    this.currentItem = 0;\n    this.currentOffset = 0;\n    this.bufferedResults = [];\n  }\n  nextItem() {\n    if (this.searchResponse.fatalError != null) {\n      this.emit(\"error\", this.searchResponse.fatalError);\n      this.push(null);\n      return;\n    } else if (this.bufferedResults.length > 0) {\n      this.pushBufferedResults();\n      return;\n    } else if (this.currentItem >= this.searchResponse.ids.length) {\n      this.push(null);\n      return;\n    }\n    let index = 0;\n    this.searchResponse.pagingFunction(this.searchResponse.ids.slice(this.currentOffset, this.currentOffset + this.searchResponse.pageSize), (err, item) => {\n      if (err != null) {\n        this.emit(\"error\", err);\n      } else {\n        this.bufferedResults.push(item);\n      }\n      this.currentItem += 1;\n      index += 1;\n      if (index === this.searchResponse.pageSize || this.currentItem === this.searchResponse.ids.length) {\n        this.push(this.bufferedResults.shift());\n      }\n    });\n    this.currentOffset += this.searchResponse.pageSize;\n  }\n  pushBufferedResults() {\n    return (() => {\n      let result1 = [];\n      while (this.bufferedResults.length > 0) {\n        let item;\n        let result = this.push(this.bufferedResults.shift());\n        if (result === false) {\n          break;\n        }\n        result1.push(item);\n      }\n      return result1;\n    })();\n  }\n  ready() {\n    this.readyToStart = true;\n    return this.emit(\"ready\");\n  }\n  _read() {\n    if (this.readyToStart != null) {\n      return this.nextItem();\n    }\n    return this.on(\"ready\", () => {\n      return this.nextItem();\n    });\n  }\n}\nmodule.exports = {\n  SearchResponseStream\n};","map":{"version":3,"names":["Readable","require","SearchResponseStream","constructor","searchResponse","objectMode","currentItem","currentOffset","bufferedResults","nextItem","fatalError","emit","push","length","pushBufferedResults","ids","index","pagingFunction","slice","pageSize","err","item","shift","result1","result","ready","readyToStart","_read","on","module","exports"],"sources":["C:/Users/Vivek Jariwala/Documents/AngularProjects/BraintreePaymentProcessor/node_modules/braintree/lib/braintree/search_response_stream.js"],"sourcesContent":["\"use strict\";\nconst { Readable } = require(\"stream\");\n\nclass SearchResponseStream extends Readable {\n  constructor(searchResponse) {\n    super({ objectMode: true });\n\n    this.searchResponse = searchResponse;\n    this.currentItem = 0;\n    this.currentOffset = 0;\n    this.bufferedResults = [];\n  }\n\n  nextItem() {\n    if (this.searchResponse.fatalError != null) {\n      this.emit(\"error\", this.searchResponse.fatalError);\n      this.push(null);\n\n      return;\n    } else if (this.bufferedResults.length > 0) {\n      this.pushBufferedResults();\n\n      return;\n    } else if (this.currentItem >= this.searchResponse.ids.length) {\n      this.push(null);\n\n      return;\n    }\n\n    let index = 0;\n\n    this.searchResponse.pagingFunction(\n      this.searchResponse.ids.slice(\n        this.currentOffset,\n        this.currentOffset + this.searchResponse.pageSize\n      ),\n      (err, item) => {\n        if (err != null) {\n          this.emit(\"error\", err);\n        } else {\n          this.bufferedResults.push(item);\n        }\n\n        this.currentItem += 1;\n        index += 1;\n\n        if (\n          index === this.searchResponse.pageSize ||\n          this.currentItem === this.searchResponse.ids.length\n        ) {\n          this.push(this.bufferedResults.shift());\n        }\n      }\n    );\n\n    this.currentOffset += this.searchResponse.pageSize;\n  }\n\n  pushBufferedResults() {\n    return (() => {\n      let result1 = [];\n\n      while (this.bufferedResults.length > 0) {\n        let item;\n        let result = this.push(this.bufferedResults.shift());\n\n        if (result === false) {\n          break;\n        }\n        result1.push(item);\n      }\n\n      return result1;\n    })();\n  }\n\n  ready() {\n    this.readyToStart = true;\n\n    return this.emit(\"ready\");\n  }\n\n  _read() {\n    if (this.readyToStart != null) {\n      return this.nextItem();\n    }\n\n    return this.on(\"ready\", () => {\n      return this.nextItem();\n    });\n  }\n}\n\nmodule.exports = { SearchResponseStream };\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}