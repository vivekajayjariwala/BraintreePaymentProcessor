{"ast":null,"code":"\"use strict\";\n\nconst {\n  Readable\n} = require(\"stream\");\nclass PaginatedResponseStream extends Readable {\n  constructor(paginatedResponse, options) {\n    super({\n      objectMode: true\n    });\n    options = options || {};\n    this.paginatedResponse = paginatedResponse;\n    this.pageSize = 0;\n    this.currentPage = 0;\n    this.index = 0;\n    this.totalItems = 0;\n    this.items = [];\n    this.search = options.search;\n  }\n  nextItem() {\n    if (this.currentPage === 0 || this.index % this.pageSize === 0 && this.index < this.totalItems) {\n      let callback = (err, totalItems, pageSize, items) => {\n        if (err) {\n          this.emit(\"error\", err);\n          return;\n        }\n        this.totalItems = totalItems;\n        this.pageSize = pageSize;\n        this.items = items;\n        this.index++;\n        this.push(this.items.shift());\n      };\n      this.currentPage++;\n      if (this.search) {\n        this.paginatedResponse.pagingFunction(this.currentPage, this.search, callback);\n      } else {\n        this.paginatedResponse.pagingFunction(this.currentPage, callback);\n      }\n    } else if (this.index >= this.totalItems) {\n      this.push(null);\n    } else {\n      this.index++;\n      this.push(this.items.shift());\n    }\n  }\n  ready() {\n    this.readyToStart = true;\n    this.emit(\"ready\");\n  }\n  _read() {\n    if (this.readyToStart) {\n      this.nextItem();\n    } else {\n      this.on(\"ready\", () => this.nextItem());\n    }\n  }\n}\nmodule.exports = {\n  PaginatedResponseStream\n};","map":{"version":3,"names":["Readable","require","PaginatedResponseStream","constructor","paginatedResponse","options","objectMode","pageSize","currentPage","index","totalItems","items","search","nextItem","callback","err","emit","push","shift","pagingFunction","ready","readyToStart","_read","on","module","exports"],"sources":["C:/Users/Vivek Jariwala/Documents/AngularProjects/BraintreePaymentProcessor/node_modules/braintree/lib/braintree/paginated_response_stream.js"],"sourcesContent":["\"use strict\";\nconst { Readable } = require(\"stream\");\n\nclass PaginatedResponseStream extends Readable {\n  constructor(paginatedResponse, options) {\n    super({ objectMode: true });\n\n    options = options || {};\n\n    this.paginatedResponse = paginatedResponse;\n    this.pageSize = 0;\n    this.currentPage = 0;\n    this.index = 0;\n    this.totalItems = 0;\n    this.items = [];\n    this.search = options.search;\n  }\n\n  nextItem() {\n    if (\n      this.currentPage === 0 ||\n      (this.index % this.pageSize === 0 && this.index < this.totalItems)\n    ) {\n      let callback = (err, totalItems, pageSize, items) => {\n        if (err) {\n          this.emit(\"error\", err);\n\n          return;\n        }\n\n        this.totalItems = totalItems;\n        this.pageSize = pageSize;\n        this.items = items;\n        this.index++;\n        this.push(this.items.shift());\n      };\n\n      this.currentPage++;\n\n      if (this.search) {\n        this.paginatedResponse.pagingFunction(\n          this.currentPage,\n          this.search,\n          callback\n        );\n      } else {\n        this.paginatedResponse.pagingFunction(this.currentPage, callback);\n      }\n    } else if (this.index >= this.totalItems) {\n      this.push(null);\n    } else {\n      this.index++;\n      this.push(this.items.shift());\n    }\n  }\n\n  ready() {\n    this.readyToStart = true;\n    this.emit(\"ready\");\n  }\n\n  _read() {\n    if (this.readyToStart) {\n      this.nextItem();\n    } else {\n      this.on(\"ready\", () => this.nextItem());\n    }\n  }\n}\n\nmodule.exports = { PaginatedResponseStream };\n"],"mappings":"AAAA,YAAY;;AACZ,MAAM;EAAEA;AAAS,CAAC,GAAGC,OAAO,CAAC,QAAQ,CAAC;AAEtC,MAAMC,uBAAuB,SAASF,QAAQ,CAAC;EAC7CG,WAAWA,CAACC,iBAAiB,EAAEC,OAAO,EAAE;IACtC,KAAK,CAAC;MAAEC,UAAU,EAAE;IAAK,CAAC,CAAC;IAE3BD,OAAO,GAAGA,OAAO,IAAI,CAAC,CAAC;IAEvB,IAAI,CAACD,iBAAiB,GAAGA,iBAAiB;IAC1C,IAAI,CAACG,QAAQ,GAAG,CAAC;IACjB,IAAI,CAACC,WAAW,GAAG,CAAC;IACpB,IAAI,CAACC,KAAK,GAAG,CAAC;IACd,IAAI,CAACC,UAAU,GAAG,CAAC;IACnB,IAAI,CAACC,KAAK,GAAG,EAAE;IACf,IAAI,CAACC,MAAM,GAAGP,OAAO,CAACO,MAAM;EAC9B;EAEAC,QAAQA,CAAA,EAAG;IACT,IACE,IAAI,CAACL,WAAW,KAAK,CAAC,IACrB,IAAI,CAACC,KAAK,GAAG,IAAI,CAACF,QAAQ,KAAK,CAAC,IAAI,IAAI,CAACE,KAAK,GAAG,IAAI,CAACC,UAAW,EAClE;MACA,IAAII,QAAQ,GAAGA,CAACC,GAAG,EAAEL,UAAU,EAAEH,QAAQ,EAAEI,KAAK,KAAK;QACnD,IAAII,GAAG,EAAE;UACP,IAAI,CAACC,IAAI,CAAC,OAAO,EAAED,GAAG,CAAC;UAEvB;QACF;QAEA,IAAI,CAACL,UAAU,GAAGA,UAAU;QAC5B,IAAI,CAACH,QAAQ,GAAGA,QAAQ;QACxB,IAAI,CAACI,KAAK,GAAGA,KAAK;QAClB,IAAI,CAACF,KAAK,EAAE;QACZ,IAAI,CAACQ,IAAI,CAAC,IAAI,CAACN,KAAK,CAACO,KAAK,CAAC,CAAC,CAAC;MAC/B,CAAC;MAED,IAAI,CAACV,WAAW,EAAE;MAElB,IAAI,IAAI,CAACI,MAAM,EAAE;QACf,IAAI,CAACR,iBAAiB,CAACe,cAAc,CACnC,IAAI,CAACX,WAAW,EAChB,IAAI,CAACI,MAAM,EACXE,QACF,CAAC;MACH,CAAC,MAAM;QACL,IAAI,CAACV,iBAAiB,CAACe,cAAc,CAAC,IAAI,CAACX,WAAW,EAAEM,QAAQ,CAAC;MACnE;IACF,CAAC,MAAM,IAAI,IAAI,CAACL,KAAK,IAAI,IAAI,CAACC,UAAU,EAAE;MACxC,IAAI,CAACO,IAAI,CAAC,IAAI,CAAC;IACjB,CAAC,MAAM;MACL,IAAI,CAACR,KAAK,EAAE;MACZ,IAAI,CAACQ,IAAI,CAAC,IAAI,CAACN,KAAK,CAACO,KAAK,CAAC,CAAC,CAAC;IAC/B;EACF;EAEAE,KAAKA,CAAA,EAAG;IACN,IAAI,CAACC,YAAY,GAAG,IAAI;IACxB,IAAI,CAACL,IAAI,CAAC,OAAO,CAAC;EACpB;EAEAM,KAAKA,CAAA,EAAG;IACN,IAAI,IAAI,CAACD,YAAY,EAAE;MACrB,IAAI,CAACR,QAAQ,CAAC,CAAC;IACjB,CAAC,MAAM;MACL,IAAI,CAACU,EAAE,CAAC,OAAO,EAAE,MAAM,IAAI,CAACV,QAAQ,CAAC,CAAC,CAAC;IACzC;EACF;AACF;AAEAW,MAAM,CAACC,OAAO,GAAG;EAAEvB;AAAwB,CAAC"},"metadata":{},"sourceType":"script","externalDependencies":[]}